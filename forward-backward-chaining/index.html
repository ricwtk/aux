<!DOCTYPE html><html><head> <meta charset="utf-8"> <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet"> <link href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css" rel="stylesheet"> <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"> <title>Forward/Backward chaining</title></head><body> <div id="app"> <v-app> <v-main> <v-container fluid style="width: 100vw; height: 100vh" class="d-flex flex-column align-center"> <v-sheet width="80%" height="100%" class="d-flex flex-column"> <v-row class="flex-grow-0" no-gutters> <v-col> <v-text-field label="Student ID" v-model="studentId" readonly outlined hide-details flat dense class="align-center"> <template v-slot:append-outer> <v-btn icon @click="studentId_overlay=true" title="edit settings"><v-icon>mdi-pencil</v-icon></v-btn> </template> <template v-slot:prepend> <v-btn icon href="./help" target="_blank" title="documentation"><v-icon>mdi-help-circle</v-icon></v-btn> </template> </v-text-field> </v-col> </v-row> <v-row class="" style="overflow:auto"> <v-col> <template v-for="d,i in data"> <v-row :key="i"><v-col> <v-card> <v-card-title class="subtitle-1 py-0"> <v-btn icon title="edit this step" @click="edit_data.index=i; edit_data.overlay=true" v-if="i !==0 || initial.editable"><v-icon>mdi-pencil</v-icon></v-btn> <v-col>{{get_data_label(i)}}</v-col> <v-btn icon title="remove this step" @click="data.splice(i,1)" v-if="i !==0 || initial.editable"><v-icon>mdi-minus</v-icon></v-btn> </v-card-title> <v-divider></v-divider> <v-card-text> <template v-for="el,ei in data_details" v-if="el.available.includes(process.value)"> <v-row :key="`${i}-${ei}`" no-gutters><v-col class="subtitle-2">{{el.label}}</v-col></v-row> <v-row v-if="el.type.includes('text')" no-gutters> <v-col class="pl-3">{{d[ei]}}</v-col> </v-row> <v-row v-if="el.type.includes('choice')" no-gutters> <v-col class="pl-3"> <v-chip class="mx-1" v-for="val,vi in d[ei]" :key="`${i}-${ei}-${vi}`">{{val}}</v-chip> </v-col> </v-row> <template v-if="el.type=='edit-edit pairs'"> <v-row v-for="val,vi in d[ei]" :key="`${i}-${ei}-${vi}`"> <v-col v-if="el.labelFunction" md="2" class="text-end my-0 py-1">{{el.labelFunction(vi)}}</v-col> <v-col v-if="el.displayFunction" class="my-0 py-1">{{el.displayFunction(val)}}</v-col> </v-row> </template> </template> </v-card-text> </v-card> </v-col></v-row> <v-row><v-col><v-btn block @click="insert_new_data_entry(i+1)"><v-icon>mdi-plus</v-icon></v-btn></v-col></v-row> </template> </v-col> </v-row> <v-row class="flex-grow-0" no-gutters> <v-col class="mr-2"><v-btn block color="" @click="upload.overlay=true" dark>Upload</v-btn></v-col> <v-col><v-btn block color="primary" @click="download">Download</v-btn></v-col> </v-row> </v-sheet> <v-dialog v-model="studentId_overlay"> <v-card> <v-card-title></v-card-title> <v-card-text> <v-text-field class="mb-4" label="Student ID" v-model="studentId" outlined persistent-hint hint="Any changes to the student ID will remove all manually inserted data"></v-text-field> <v-select label="Process" v-model="process.value" :items="process.options" hide-details outlined></v-select> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color="primary" @click="studentId_overlay=false">Ok</v-btn> </v-card-actions> </v-card> </v-dialog> <v-dialog v-model="edit_data.overlay"> <v-card v-if="edit_data.index < data.length"> <v-card-title>{{get_data_label(edit_data.index)}}</v-card-title> <v-card-text> <template v-for="el,ei in data_details" v-if="el.available.includes(process.value)"> <v-row> <v-col cols="auto" class="subtitle-2">{{el.label}}</v-col> <v-col> <v-tooltip right> <template v-slot:activator="{on, attrs}"> <v-icon icon v-on="on" v-bind="attrs" small>mdi-help-circle-outline</v-icon> </template> <span>{{el.docstring}}</span> </v-tooltip> </v-col> </v-row> <v-text-field v-if="el.type=='text'" v-model="data[edit_data.index][ei]" outlined hide-details solo flat></v-text-field> <v-textarea v-if="el.type=='textarea'" v-model="data[edit_data.index][ei]" outlined hide-details solo flat></v-textarea> <v-select v-if="el.type=='unrepeatable choice'" v-model="data[edit_data.index][ei]" :items="el.options" multiple hide-details outlined deletable-chips chips solo flat></v-select> <template v-if="el.type=='repeatable choice'"> <v-row v-for="ci in data[edit_data.index][ei].length" :key="`editdata-${ei}-${ci}`" no-gutters> <v-col><v-select :items="el.options" v-model="data[edit_data.index][ei][ci-1]" hide-details outlined solo flat dense class="align-center"> <template v-slot:append-outer> <v-btn icon @click="data[edit_data.index][ei].splice(ci-1,1)"><v-icon>mdi-minus</v-icon></v-btn> </template> <template v-slot:prepend> <v-btn icon @click="data[edit_data.index][ei].splice(ci-1,0,el.options[0])"><v-icon>mdi-plus</v-icon></v-btn> </template> </v-select></v-col> </v-row> <v-row><v-col><v-btn block @click="data[edit_data.index][ei].push(el.options[0])"><v-icon>mdi-plus</v-icon></v-btn></v-col></v-row> </template> <template v-if="el.type=='edit-edit pairs'"> <v-row v-for="ci in data[edit_data.index][ei].length" :key="`editdata-${ei}-${ci}`"> <v-col v-if="el.labelFunction" md="2" lg="1" class="text-end">{{el.labelFunction(ci-1)}}</v-col> <v-col v-for="indivType,ii in el.types" class="my-0 py-1" :key="`editdata-${ei}-${ci}-${ii}`"> <v-select v-if="indivType.includes('choice')" :items="el.options[ii]" v-model="data[edit_data.index][ei][ci-1][ii]" hide-details outlined solo flat dense class="align-center"> <template v-slot:prepend v-if="el.pretext.length > 0 && ii < el.pretext.length"> <v-col class="ma-0 pa-0">{{el.pretext[ii]}}</v-col> </template> </v-select> </v-col> <v-col cols="auto"><v-btn icon @click="data[edit_data.index][ei].splice(ci-1,1)"><v-icon>mdi-minus</v-icon></v-btn></v-col> </v-row> <v-row><v-col><v-btn block @click="data[edit_data.index][ei].push(el.options.map(x=> x[0]))"><v-icon>mdi-plus</v-icon></v-btn></v-col></v-row> </template> </template> </v-card-text> </v-card> </v-dialog> <v-dialog v-model="upload.overlay"> <v-card> <v-card-title></v-card-title> <v-card-text> <v-alert type="info">You only need this function if the website has crashed.</v-alert> <v-row><v-col>This function is only for uploading your previously downloaded files.</v-col></v-row> <v-file-input v-model="upload.file" label="Upload file"></v-file-input> <v-alert type="error" v-if="upload.error.length > 0">{{upload.error}}</v-alert> </v-card-text> <v-card-actions> <v-spacer></v-spacer> <v-btn color="primary" @click="upload_file">Upload</v-btn> </v-card-actions> </v-card> </v-dialog> </v-container> </v-main> </v-app> </div><script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script> <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script> <script>let vm=new Vue({el: '#app', vuetify: new Vuetify(), data:{studentId: "00000000", studentId_overlay: true, process:{options: ["forward", "backward"], value: "forward"}, data: [], data_details: [{label: "Working memory", type: "unrepeatable choice", /* unrepeated choice/repeatable choice/textarea/text */ docstring: "All the facts in the working memory of current step", options: ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','P','Q','R','W'], available: ["forward", "backward"]},{label: "Fired rules from start", type: "repeatable choice", docstring: "Rules fired since the beginning of the process in sequence", options: ["rule 1", "rule 2", "rule 3", "rule 4", "rule 5", "rule 6", "rule 7", "rule 8", "rule 9", "rule 10"], available: ["forward", "backward"]},{label: "Goals/Subgoals", docstring: "Goal and subgoals (with their respective rule) until this step. Achieved subgoals should be removed", type: "edit-edit pairs", movable: true, types: ["choice", "choice"], options: [ ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','P','Q','R','W'], ["", "rule 1", "rule 2", "rule 3", "rule 4", "rule 5", "rule 6", "rule 7", "rule 8", "rule 9", "rule 10"]], labelFunction: (x)=> x==0 ? "Goal" : `Subgoal ${x}`, displayFunction: (x)=> `${x[0]}${x[1]=="" ? '' : '(provided by ' + x[1] + ')'}`, pretext: ["", "from"], available: ["backward"]},{label: "Remark", docstring: "Can be used for any additional explanation", type: "textarea", available: ["forward", "backward"]}], index_label: "Step", default_values: [ [], [], [], ""], initial:{values: [ ["B","C","F","K"], [], [], ""], index:{as: "text", /* label/hidden/text */ text: "at initial,"}, editable: false}, edit_data:{overlay: false, index: 0}, upload:{overlay: false, file: undefined, error: ""}}, mounted: function (){this.init_data();}, watch:{studentId: function (){console.log("Student ID updated"); this.init_data();}, "edit_data.overlay": function (newVal){if (!newVal){this.data_details.forEach((el,ei)=>{if (el.type=="unrepeatable choice"){this.data[this.edit_data.index][ei].sort();}});}}}, computed:{sd: function (){return this.studentId;}}, methods:{init_data: function (){this.data=[]; this.data.push( JSON.parse( JSON.stringify( this.initial.values ) ) );}, get_data_label: function (index){let val=""; if (index==0 && this.initial.index.as !=="label"){if (this.initial.index.as=="text"){val=this.initial.index.text;}}else{val=`${this.index_label}${index}`;}return val;}, insert_new_data_entry: function (i){this.data.splice(i, 0, JSON.parse(JSON.stringify(this.data[i-1]))); this.$nextTick().then(()=>{this.edit_data.index=i; this.edit_data.overlay=true;});}, download: function (){let dldata={studentId: this.studentId, process: this.process.value, data_details: this.data_details, data: JSON.parse(JSON.stringify(this.data))}; let j=document.createElement("a"); j.download="forwardbackwardchaining.json"; j.href=URL.createObjectURL(new Blob([JSON.stringify(dldata)])); j.click();}, upload_file: function (){if (this.upload.file !==undefined){const reader=new FileReader(); reader.onload=(ev)=>{try{let fileContent=JSON.parse(ev.target.result); this.studentId=fileContent.studentId; this.$nextTick().then(()=>{this.process.value=fileContent.process; this.data=fileContent.data.map(x=> x.slice(0, this.default_values.length));}).then(()=>{this.upload.overlay=false;}).catch(err=>{this.upload.error=err.message;});}catch (err){this.upload.error=err.message;}}; reader.readAsText(this.upload.file);}}}}) </script></body></html>
